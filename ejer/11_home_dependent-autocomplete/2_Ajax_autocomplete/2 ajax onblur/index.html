<html>
<head>
	<style>
		.drop-shadow {   margin:2em 30% 4em; }
	</style>
	<script type="text/javascript" >
		var myRequest = getXMLHTTPRequest();
		
		function getXMLHTTPRequest(){
		var request = false;
		if(window.XMLHttpRequest){
		  request = new XMLHttpRequest();
		} else {
		  if(window.ActiveXObject){
			try{
			  request = new ActiveXObject("Msml2.XMLHTTP");
			}catch(err1){
			  try{
				request = new ActiveXObject("Microsoft.XMLHTTP");
			  }catch(err2){
				request = false;
			  }
		   }
		  }
		}
		return request;
		}

		function ejecutarAJAX() {
			var user=document.forms['form1'].user.value;
			//Construimos la url que vamos a llamar
			var url = "validarUserAjax.php?user=" + user;
			// Abrimos la conexion de tipo GET
			myRequest.open("GET", url, true);
			// Cuando la respuesta llegue se llamara
			// el metodo respuestaAJAX
			myRequest.onreadystatechange = respuestaAJAX;
			// y finalmente enviamos la peticion
			myRequest.send(null);
		}

		function respuestaAJAX() {
			// Solo entra cuando se completa la peticion
			if(myRequest.readyState == 4) {
				  // Si la respuesta HTTP es OK
				   if(myRequest.status == 200) {
					 document.getElementById('respuesta').innerHTML= myRequest.responseText;
				} else {
					// Manejamos el error con el statusText
					document.getElementById('respuesta').innerHTML= myRequest.status;
				}
			}else{
			  document.getElementById('respuesta').innerHTML="<img src='anim.gif' />";
			}
			
		}
	</script>
</head>
<body>
	<div class="drop-shadow curved curved-hz-1">
		<form name='form1'>
			<table width="500" >
				<tr>
					<td colspan="2">
						Usuarios existentes (user,root o admin)
					</td>
				</tr>
				<tr>
					<td>
						Nombre de Usuario: <input type='text' name='user' onblur='ejecutarAJAX()'>
					</td>
					<td>
						<div id='respuesta'></div>
					</td>
				</tr>
			</table>
		</form>
	</div>
</body>
</html>